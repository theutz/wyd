pre-push:
  parallel: false
  commands:
    generate:
      tags: build
      run: go generate ./...
    tidy:
      tags: build
      run: go mod tidy
    lint:
      tags: style
      run: golangci-lint run ./...
    test:
      tags: test
      run: gotestsum ./... -- -count=1

pre-commit:
  parallel: true
  commands:
    lint:
      tags: style
      files: git ls-files -m
      glob: "*.go"
      run: golangci-lint run {files}
    test:
      tags: test
      files: git ls-files -m
      glob: "*.go"
      run: gotestsum {files}
